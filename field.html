<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Agri-Assist - Field Management</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <div class="container">
      <h1 class="logo">Agri-Assist</h1>
      <nav>
        <ul class="nav-links">
          <li><a href="index.html" class="nav-link">Home</a></li>
          <li><a href="crops.html" class="nav-link">Crops</a></li>
          <li><a href="field.html" class="nav-link active">Field Management</a></li>
          <li><a href="weather.html" class="nav-link">Weather</a></li>
          <li><a href="marketplace.html" class="nav-link">Market Prices</a></li>
          <li><a href="contact.html" class="nav-link">Contact</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <section class="container">
    <h2>Field Management Tools</h2>
    <img src="https://images.pexels.com/photos/1084542/pexels-photo-1084542.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2" alt="A farmer working in a green field" class="section-banner-image">
    
    <div class="calculator">
        <h3>Fertilizer Calculator (Urea)</h3>
        <p>Estimate the amount of Urea (46% N) needed for your field.</p>
        <div class="form-group">
            <label for="area">Field Area (in acres):</label>
            <input type="number" id="area" placeholder="e.g., 2.5">
        </div>
        <div class="form-group">
            <label for="nitrogen-req">Nitrogen Requirement (kg/acre):</label>
            <input type="number" id="nitrogen-req" placeholder="e.g., 50">
        </div>
        <button class="btn-primary" id="calculate-btn">Calculate</button>
        <div id="calculator-result"></div>
    </div>

    <div id="task-manager" class="calculator" style="margin-top: 40px;">
        <h3>My Farm Tasks</h3>
        <p>Your tasks are saved in your browser.</p>
        <div style="display: flex; gap: 10px;">
            <input type="text" id="task-input" placeholder="e.g., Schedule irrigation for Plot A" style="flex-grow: 1; margin: 0;">
            <button class="btn-primary" id="add-task-btn">Add Task</button>
        </div>
        <ul id="taskList" style="margin-top: 20px; list-style: none; padding: 0;">
            </ul>
    </div>
  </section>

  <footer>
    <div class="container">
      <p>© 2025 Agri-Assist. All rights reserved.</p>
    </div>
  </footer>

  <script>
    // Calculator Script
    document.getElementById('calculate-btn').addEventListener('click', () => {
        const area = parseFloat(document.getElementById('area').value);
        const nitrogenReq = parseFloat(document.getElementById('nitrogen-req').value);
        const resultDiv = document.getElementById('calculator-result');

        if (isNaN(area) || isNaN(nitrogenReq) || area <= 0 || nitrogenReq <= 0) {
            resultDiv.textContent = 'Please enter valid positive numbers.';
            return;
        }

        const ureaFactor = 1 / 0.46;
        const totalNitrogenNeeded = area * nitrogenReq;
        const totalUreaNeeded = totalNitrogenNeeded * ureaFactor;

        resultDiv.textContent = `Estimated Urea Required: ${totalUreaNeeded.toFixed(2)} kg`;
    });

    // Task Manager Script
    document.addEventListener('DOMContentLoaded', () => {
        const taskInput = document.getElementById('task-input');
        const addTaskBtn = document.getElementById('add-task-btn');
        const taskList = document.getElementById('taskList');

        const loadTasks = () => {
            const tasks = JSON.parse(localStorage.getItem('farmTasks')) || [
                { text: 'Soil preparation tracking', completed: true },
                { text: 'Irrigation scheduling', completed: false },
                { text: 'Pest & fertilizer application log', completed: false }
            ];
            taskList.innerHTML = '';
            tasks.forEach(task => createTaskElement(task.text, task.completed));
        };

        const saveTasks = () => {
            const tasks = [];
            document.querySelectorAll('#taskList li').forEach(li => {
                tasks.push({
                    text: li.querySelector('span').textContent,
                    completed: li.classList.contains('completed')
                });
            });
            localStorage.setItem('farmTasks', JSON.stringify(tasks));
        };

        const createTaskElement = (taskText, isCompleted) => {
            const li = document.createElement('li');
            li.style.display = 'flex';
            li.style.justifyContent = 'space-between';
            li.style.alignItems = 'center';
            li.style.padding = '10px';
            li.style.borderBottom = '1px solid #eee';

            if (isCompleted) {
                li.classList.add('completed');
                li.style.textDecoration = 'line-through';
                li.style.color = '#888';
            }

            const span = document.createElement('span');
            span.textContent = taskText;

            const buttonsDiv = document.createElement('div');
            
            const completeBtn = document.createElement('button');
            completeBtn.textContent = '✔️';
            completeBtn.style.cursor = 'pointer';
            completeBtn.style.border = 'none';
            completeBtn.style.background = 'transparent';
            completeBtn.style.marginRight = '10px';
            completeBtn.onclick = () => {
                li.classList.toggle('completed');
                li.style.textDecoration = li.classList.contains('completed') ? 'line-through' : 'none';
                li.style.color = li.classList.contains('completed') ? '#888' : 'inherit';
                saveTasks();
            };

            const deleteBtn = document.createElement('button');
            deleteBtn.textContent = '❌';
            deleteBtn.style.cursor = 'pointer';
            deleteBtn.style.border = 'none';
            deleteBtn.style.background = 'transparent';
            deleteBtn.onclick = () => {
                li.remove();
                saveTasks();
            };
            
            buttonsDiv.appendChild(completeBtn);
            buttonsDiv.appendChild(deleteBtn);
            
            li.appendChild(span);
            li.appendChild(buttonsDiv);
            taskList.appendChild(li);
        };

        addTaskBtn.addEventListener('click', () => {
            const taskText = taskInput.value.trim();
            if (taskText) {
                createTaskElement(taskText, false);
                taskInput.value = '';
                saveTasks();
            }
        });

        taskInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                addTaskBtn.click();
            }
        });

        loadTasks();
    });
  </script>
</body>
</html>